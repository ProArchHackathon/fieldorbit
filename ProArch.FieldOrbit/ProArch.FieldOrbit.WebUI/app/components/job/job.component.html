<form name="exampleForm" class="scrollable-form">

    <md-card>
        <md-card-title><b>{{Button}} Job</b></md-card-title>
        <div class="padder">

            <md-form-field *ngIf="job.JobId" class="example-full-width">
                <input mdInput disabled required [(ngModel)]="job.JobId" name="JobId" placeholder="Job Id">
            </md-form-field>

            <md-form-field class="example-full-width">
                <input mdInput required [(ngModel)]="job.ServiceRequest.ServiceRequestId" autofocus name="ServiceRequestId" placeholder="Service Request Id">
            </md-form-field>

            <button class="mat-button mat-primary" md-raised-button (click)="getServiceRequest()">Get</button>
            <span style="color:red" *ngIf="serviceRequestError">{{serviceRequestError}}</span>
        </div>

        <div class="padder">
            <!-- <md-form-field class="example-full-width">
                <input mdInput [(ngModel)]="estTime" name="estTime" placeholder="Est. Duration">
            </md-form-field> -->

            <md-form-field class="example-full-width">
                <input mdInput [mdDatepicker]="startDate" [(ngModel)]="job.StartTime" (blur)="validateDate()" name="StartTime" placeholder="Start Date">
                <md-datepicker-toggle mdSuffix [for]="startDate"></md-datepicker-toggle>
                <md-datepicker #startDate></md-datepicker>
            </md-form-field>
            
            <md-form-field class="example-full-width">
                <input mdInput [mdDatepicker]="endDate" [(ngModel)]="job.EndTime" name="EndDate" (blur)="validateDate()" placeholder="End Date">
                <md-datepicker-toggle mdSuffix [for]="endDate"></md-datepicker-toggle>
                <md-datepicker #endDate></md-datepicker>
            </md-form-field>
        </div>

        <div class="padder">
            <md-select placeholder="Status" [(ngModel)]="job.Status" name="Status">
                <md-option *ngFor="let statusValue of Statuses" [value]="statusValue.value">
                    {{ statusValue.viewValue }}
                </md-option>
            </md-select>

            <md-select placeholder="Priority" [(ngModel)]="job.Priority" name="Priority">
                <md-option *ngFor="let priorValue of Priorities" [value]="priorValue.value">
                    {{ priorValue.viewValue }}
                </md-option>
            </md-select>

        </div>
        <div class="padder">
            <md-form-field class="example-full-width">
                <textarea mdInput [(ngModel)]="job.JobDescription" name="JobDescription" placeholder="Job Description"></textarea>
            </md-form-field>
            
            <md-form-field class="example-full-width">
                <textarea mdInput [(ngModel)]="job.Comments" name="Comments" placeholder="Comments"></textarea>
            </md-form-field>

            <md-form-field class="example-full-width">
                <textarea mdInput [(ngModel)]="job.Observations" name="Observations" placeholder="Observations"></textarea>
            </md-form-field>
        </div>
        <br />
        <p style="text-align: right">
            <span style="color:red" *ngIf="ErrorMessage">{{ErrorMessage}}</span>
            <button *ngIf="showButton" class="mat-button mat-primary" md-raised-button (click)="onSubmit()">{{Button}}</button>
        </p>
    </md-card>
    <md-card>
        <table class="table" style="width:100%;cursor:pointer;">
            <tr>
                <th>Service Request Id</th>
                <th>Job Description</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Status</th>
                <th>Priority</th>
            </tr>
            <tr *ngFor="let sr of jobList" (click)="onSelectedRow(sr)">
                <td>{{sr.ServiceRequest.ServiceRequestId }} </td>
                <td>{{sr.JobDescription}} </td>
                <td>{{sr.StartTime}} </td>
                <td>{{sr.EndTime}} </td>
                <td>{{sr.Status}} </td>
                <td>{{sr.Priority}} </td>
            </tr>
        </table>
    </md-card>

</form>