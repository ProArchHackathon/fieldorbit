<form name="exampleForm">

    <md-card>
        <md-card-title><b>{{Button}} Job</b></md-card-title>
        <div class="padder">
            <md-form-field *ngIf="JobId" class="example-full-width">
                <label>Job Id</label>
                <input mdInput disabled required [(ngModel)]="JobId" name="JobId">
            </md-form-field>
            <md-form-field class="example-full-width">
                <label>Service Request Id</label>
                <input mdInput required [(ngModel)]="ServiceRequest.ServiceRequestId" autofocus name="ServiceRequestId">
            </md-form-field>
            <button class="mat-button mat-primary" md-raised-button (click)="getServiceRequest()">Get</button>
            <span style="color:red" *ngIf="serviceRequestError">{{serviceRequestError}}</span>
        </div>

        <div class="padder">
            <md-form-field class="example-full-width">
                <label>Est. Duration</label>
                <input mdInput [(ngModel)]="estTime" name="estTime">
            </md-form-field>

            <md-form-field class="example-full-width">
                <label>Start Date</label>
                <input mdInput [mdDatepicker]="startDate" [(ngModel)]="StartTime" (blur)="validateDate()" name="StartTime">
                <md-datepicker-toggle mdSuffix [for]="startDate"></md-datepicker-toggle>
                <md-datepicker #startDate></md-datepicker>
            </md-form-field>
            
            <md-form-field class="example-full-width">
                <label>End Date</label>
                <input mdInput [mdDatepicker]="endDate" [(ngModel)]="EndTime" name="EndDate" (blur)="validateDate()">
                <md-datepicker-toggle mdSuffix [for]="endDate"></md-datepicker-toggle>
                <md-datepicker #endDate></md-datepicker>
            </md-form-field>
        </div>

        <div class="padder">
            <md-select placeholder="Status" [(ngModel)]="Status" name="Status" floatPlaceholder="always">
                <md-option *ngFor="let statusValue of Statuses" [value]="statusValue.value">
                    {{ statusValue.viewValue }}
                </md-option>
            </md-select>
            <md-select placeholder="Priority" [(ngModel)]="Priority" name="Priority" floatPlaceholder="always">
                <md-option *ngFor="let priorValue of Priorities" [value]="priorValue.value">
                    {{ priorValue.viewValue }}
                </md-option>
            </md-select>

            <md-select placeholder="Category" [(ngModel)]="jobCategory" name="jobCategory" floatPlaceholder="always">
                <md-option *ngFor="let categoryValue of Category" [value]="categoryValue.value">
                    {{ categoryValue.viewValue }}
                </md-option>
            </md-select>
        </div>
        <div class="padder">
            <md-form-field class="example-full-width">
                <label>Job Description</label>
                <textarea mdInput [(ngModel)]="JobDescription" name="JobDescription"></textarea>
            </md-form-field>
            <md-form-field class="example-full-width">
                <label>Comments</label>
                <textarea mdInput [(ngModel)]="Comments" name="Comments"></textarea>
            </md-form-field>

            <md-form-field class="example-full-width">
                <label>Observations</label>
                <textarea mdInput [(ngModel)]="Observations" name="Observations"></textarea>
            </md-form-field>
        </div>
        <br />
        <p style="text-align: right">
            <span style="color:red" *ngIf="ErrorMessage">{{ErrorMessage}}</span>
            <button *ngIf="showButton" class="mat-button mat-primary" md-raised-button (click)="onSubmit()">{{Button}}</button>
        </p>
    </md-card>
    <md-card>
        <table class="table" style="width:100%;cursor:pointer;">
            <tr>
                <th>Service Request Id</th>
                <th>Job Description</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Status</th>
                <th>Priority</th>
            </tr>
            <tr *ngFor="let sr of jobList" (click)="onSelectedRow(sr)">
                <td>{{sr.ServiceRequest.ServiceRequestId }} </td>
                <td>{{sr.JobDescription}} </td>
                <td>{{sr.StartTime}} </td>
                <td>{{sr.EndTime}} </td>
                <td>{{sr.Status}} </td>
                <td>{{sr.Priority}} </td>
            </tr>
        </table>
    </md-card>

</form>